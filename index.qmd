---
title: "WhatsApp DS Analytics"
subtitle: "Pipeline de Data Science para anÃ¡lise de conversas"
author: "Marlon"
date: today
format:
  html:
    toc: true
    theme: cosmo
---

# IntroduÃ§Ã£o

Conversas do WhatsApp sÃ£o um tesouro de dados sobre nossas interaÃ§Ãµes humanas. PorÃ©m, quando exportadas, chegam em um formato que mistura estrutura com caos: timestamps irregulares, caracteres invisÃ­veis, mensagens quebradas em mÃºltiplas linhas, mÃ­dias omitidas ou anexadas.

## Contexto

Como estudante de ciÃªncia de dados e interessado em anÃ¡lises qualitativas e aprendizado de novas ferramentas, fazer um projeto de data-wrangling com Python nestes dados, incluindo transcriÃ§Ã£o de mÃ­dias e enriquecimento da base, ou seja, dos dados brutos, documentando todo processo usando Quarto (.qmd) parece uma abordagem desafiadora e profissional.

Do ponto de vista tÃ©cnico, a escolha de trabalhar com este formato semi-estruturado apresentam *edge-cases* bem especificos como caracteres especiais e emojis, tags ou textos de marcaÃ§Ã£o para certos tipos de interaÃ§Ã£o (envio de mensagem de Ã¡udio, vÃ­deo, arquivos etc), mensagens fragmentadas, formatos inconsistentes entre outras coisas que iremos explorar tratar neste projeto.

## Objetivo

Transformar um export bruto do WhatsApp (`_chat.txt`) em um dataset estruturado para realizar analises de forma reprodutÃ­vel, passando por todas as fase de preparaÃ§Ã£o, agregaÃ§Ã£o e enriquecimento dos dados atÃ© Ã s suas anÃ¡lises e visualizaÃ§Ãµes. Neste relatÃ³rio, documentarei cada etapa do processo da pipeline de dados criado exclusivamente para este cenÃ¡rio.

![Pipeline de dados completo demonstra prÃ¡ticas de Data Engineering e Data Science, desde a investigaÃ§Ã£o inicial do arquivo bruto atÃ© anÃ¡lises avanÃ§adas.](./assets/images/ds-pipeline-to-insight.png){fig-align="center"}

::: callout-note
### Estudo de caso

Como estudo de caso vou utilizar o histÃ³rico de ~14 meses de mensagens entre minha namorada e eu (~92K mensagens, ~5MB). Para alÃ©m do aprendizado em ciÃªncia de dados e *analytics*, essa escolha se deu por conta de uma ideia que tive de fazer anÃ¡lises textuais sobre nosso primeiro ano de namoro, extraindo visualizaÃ§Ãµes e insights para criar um "*presente digital analÃ­tico*" do nosso 1Âº ano de namoro ğŸ˜ ğŸ¥°. ApÃ³s preparar os dados iremos vincular as datas de quando estivemos juntos durante este um ano (~10 viagens em 2025) Ã s mensagens daquele perÃ­odo.

Outros incrementos foram desenvolvidos para agregar a estes dados ainda mais riqueza, como a transcriÃ§Ã£o automatizada de Ã¡udios e vÃ­deos, padronizando toda mÃ­dia possÃ­vel em formato texto.
:::

---

# NavegaÃ§Ã£o

## Pipeline Principal

| Fase | Documento | DescriÃ§Ã£o |
|------------------|---------------------------|---------------------------|
| Exploration | [00-data-profiling](notebooks/00-data-profiling.qmd) | InvestigaÃ§Ã£o da estrutura do arquivo bruto |
| Cleaning | [01-data-cleaning](notebooks/01-data-cleaning.qmd) | Limpeza e normalizaÃ§Ã£o |
| Wrangling | [02-data-wrangling](notebooks/02-data-wrangling.qmd) | Parsing, vinculaÃ§Ã£o de mÃ­dia, transcriÃ§Ã£o |
| Features | [03-feature-engineering](notebooks/03-feature-engineering.qmd) | CriaÃ§Ã£o de variÃ¡veis derivadas |
| Analysis | [04-eda](notebooks/04-eda.qmd) | Descritivos das variÃ¡veis, tabelas e grÃ¡ficos |
| Analysis | [05-advanced-analysis](notebooks/05-advanced-analysis.qmd) | Clustering, MCA, sÃ©ries temporais |

## Scripts UtilitÃ¡rios

| Script | DescriÃ§Ã£o |
|--------|-----------|
| [transcribe_media.py](scripts/README.md) | TranscriÃ§Ã£o de Ã¡udios/vÃ­deos via Groq/Whisper API |

## Documentos Ãºteis

- [DicionÃ¡rio de Dados](docs/data-dictionary.md)
- [Como organizar seus dados](data/README.md)
- [Guia de Setup](docs/SETUP-GUIDE.md)

---

# Arquitetura

O projeto segue uma arquitetura modular que separa **lÃ³gica** de **apresentaÃ§Ã£o**:

```
src/                          # LÃ³gica (mÃ³dulos Python)
â”œâ”€â”€ cleaning.py               # Pipeline de limpeza (7 etapas)
â”œâ”€â”€ wrangling.py              # Pipeline de wrangling (6 etapas)
â”œâ”€â”€ features.py               # Feature engineering
â””â”€â”€ utils/audit.py            # Sistema de auditoria

notebooks/                    # ApresentaÃ§Ã£o (Quarto)
â”œâ”€â”€ 01-data-cleaning.qmd      # Configura e executa cleaning
â”œâ”€â”€ 02-data-wrangling.qmd     # Configura e executa wrangling
â””â”€â”€ ...

scripts/                      # ExecutÃ¡veis standalone
â””â”€â”€ transcribe_media.py       # Roda fora do pipeline (~40 min)
```

## Vantagens

- **TestÃ¡vel**: FunÃ§Ãµes isoladas e importÃ¡veis
- **ReutilizÃ¡vel**: MÃ³dulos funcionam independente dos notebooks
- **ConfigurÃ¡vel**: Ordem das etapas via lista simples
- **AuditÃ¡vel**: MÃ©tricas de cada transformaÃ§Ã£o

---

# Estrutura do Projeto

```
whatsapp-ds-analytics/
â”œâ”€â”€ index.qmd                 # Este documento
â”œâ”€â”€ .env                      # ConfiguraÃ§Ã£o local (nÃ£o versionado)
â”‚
â”œâ”€â”€ src/                      # MÃ³dulos Python
â”‚   â”œâ”€â”€ config.py             # Paths e configuraÃ§Ãµes
â”‚   â”œâ”€â”€ cleaning.py           # Pipeline de limpeza
â”‚   â”œâ”€â”€ wrangling.py          # Pipeline de wrangling
â”‚   â”œâ”€â”€ features.py           # Feature engineering
â”‚   â””â”€â”€ utils/
â”‚       â””â”€â”€ audit.py          # Auditoria de transformaÃ§Ãµes
â”‚
â”œâ”€â”€ scripts/                  # Scripts standalone
â”‚   â””â”€â”€ transcribe_media.py   # TranscriÃ§Ã£o de mÃ­dias
â”‚
â”œâ”€â”€ notebooks/                # Documentos Quarto
â”‚   â”œâ”€â”€ 00-data-profiling.qmd
â”‚   â”œâ”€â”€ 01-data-cleaning.qmd
â”‚   â”œâ”€â”€ 02-data-wrangling.qmd
â”‚   â”œâ”€â”€ 03-feature-engineering.qmd
â”‚   â”œâ”€â”€ 04-eda.qmd
â”‚   â””â”€â”€ 05-advanced-analysis.qmd
â”‚
â”œâ”€â”€ data/                     # Dados (nÃ£o versionado)
â”‚   â”œâ”€â”€ raw/                  # Exports brutos
â”‚   â”œâ”€â”€ interim/              # IntermediÃ¡rios
â”‚   â””â”€â”€ processed/            # Datasets finais
â”‚
â”œâ”€â”€ analysis/                 # GrÃ¡ficos (nÃ£o versionado)
â”‚
â””â”€â”€ docs/                     # DocumentaÃ§Ã£o
    â”œâ”€â”€ SETUP-GUIDE.md
    â””â”€â”€ data-dictionary.md
```

---

# Outputs

O pipeline gera os seguintes arquivos em `data/processed/{DATA_FOLDER}/`:

| Arquivo | DescriÃ§Ã£o | Uso |
|---------|-----------|-----|
| `messages.csv` | Dataset principal (8 colunas) | **Use este para anÃ¡lises** |
| `messages.parquet` | Mesmo conteÃºdo, ~3x menor | Performance |
| `messages_full.csv` | VersÃ£o completa (17 colunas) | Debug/auditoria |
| `chat_complete.txt` | Chat formatado com transcriÃ§Ãµes | Leitura |
| `corpus_*.txt` | Textos puros | NLP, word clouds |

---

# Quick Start

```bash
# 1. Configure o ambiente
cp .env.example .env
# Edite .env com seus paths

# 2. (Opcional) Transcreva Ã¡udios/vÃ­deos
python scripts/transcribe_media.py

# 3. Rode o pipeline
quarto preview
```

Para mais detalhes, veja o [Guia de Setup](docs/SETUP-GUIDE.md).
